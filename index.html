<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartAI Crop Disease Tracker</title>
    <link rel="stylesheet" href="styles.css">

    <!-- Google Translate Script -->
    <script type="text/javascript">
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({
                pageLanguage: 'en',  // Default language
                includedLanguages: 'af,sq,am,ar,hy,az,eu,be,bn,bg,my,ca,zh-CN,zh-TW,hr,cs,da,nl,en,et,fi,fr,gl,ka,de,el,gu,iw,hi,hu,is,id,ga,it,ja,jv,kn,kk,km,ko,ku,ky,lo,lv,lt,lb,mk,mg,ms,ml,mt,mi,mr,mn,ne,no,fa,pl,pt,pa,ro,ru,sm,gd,sr,st,si,sk,sl,es,su,sw,sv,tg,ta,tt,te,th,tr,uk,ur,uz,vi,cy,xh,yi,zu', // All supported languages
                layout: google.translate.TranslateElement.InlineLayout.SIMPLE
            }, 'google_translate_element');
        }
    </script>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
</head>

<body>
    <!-- Google Translate Element -->
    <div id="google_translate_element"></div>

    <div class="container">
        <nav>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="contact.html">Contact Us</a></li>
                <li id="user-greeting"></li>
                <li><a href="/auth/google">Sign In with Google</a></li>
            </ul>

            <div class="search-bar">
                <input type="text" placeholder="Search Products...">
                <button type="submit">&#128269;</button>
            </div>
        </nav>

        <div class="content-wrapper">
            <div class="left-section">
                <h2>Empowering Farmers with Smart AI Crop Disease Tracker</h2>
                <h1>Protect Your Crops with AI Disease Prediction</h1>
                <p id="text-to-read">Upload a photo of your crop to get an instant disease diagnosis using our advanced AI technology. Get actionable insights to ensure the best yield and healthier crops.</p>
                <form id="uploadForm" enctype="multipart/form-data">
                    <input type="file" id="fileInput" accept="image/*" required>
                    <button type="submit">Submit</button>
                </form>
                <h3 id="predictionResult"></h3>
            </div>

            <div class="right-section">
                <div class="leaf-icons"></div>
                <div class="dots">
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                </div>
            </div>
        </div>
    </div>

    <!-- Text-to-Speech Script -->
    <script type="text/javascript">
        function speakText(text, lang = 'en') {
            const synth = window.speechSynthesis;
            const utterThis = new SpeechSynthesisUtterance(text);
            utterThis.lang = lang;
            synth.speak(utterThis);
        }

        // Language code mapping for supported text-to-speech languages
        const langMap = {
            'en': 'en-US', 'fr': 'fr-FR', 'es': 'es-ES', 'de': 'de-DE', 'hi': 'hi-IN', 'ar': 'ar-SA',
            'it': 'it-IT', 'ja': 'ja-JP', 'ko': 'ko-KR', 'ru': 'ru-RU', 'zh-CN': 'zh-CN', 'pt': 'pt-PT',
            'nl': 'nl-NL', 'pl': 'pl-PL', 'sv': 'sv-SE', 'tr': 'tr-TR', 'uk': 'uk-UA'
            // You can add more mappings based on available Web Speech API voices.
        };

        // Automatically trigger text-to-speech after translation
        function autoSpeakText() {
            const selectedText = document.getElementById('text-to-read').innerText;
            const langCode = document.querySelector('.goog-te-combo').value;
            const speechLang = langMap[langCode] || 'en-US'; // Fallback to English if not found
            speakText(selectedText, speechLang);
        }

        // Add event listener to trigger speech after language change
        window.onload = function () {
            const googleTranslateDropDown = document.querySelector('.goog-te-combo');
            if (googleTranslateDropDown) {
                googleTranslateDropDown.addEventListener('change', autoSpeakText);
            }

            // Event listener for text selection
            document.addEventListener('mouseup', function () {
                const selectedText = window.getSelection().toString();  // Get the selected text
                if (selectedText) {
                    const langCode = document.querySelector('.goog-te-combo').value;  // Get the selected language code
                    const speechLang = langMap[langCode] || 'en-US';  // Map the language code to a TTS voice, default to 'en-US'
                    speakText(selectedText, speechLang);  // Speak the selected text
                }
            });
        };
    </script>

</body>

</html>
